{"componentChunkName":"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js","path":"/nodeJs_amadeus/nodejs_amadeus/","webpackCompilationHash":"8d8f5527ea7e7bb8092d","result":{"data":{"site":{"siteMetadata":{"title":"A developer journey","social":[{"name":"twitter","url":"https://twitter.com/theophile_vast"},{"name":"github","url":"https://github.com/tvast"}]}},"blogPost":{"__typename":"MdxBlogPost","id":"5b3438d4-0078-5641-ac32-6723f542588d","excerpt":"Hello developers! Today we’re going to learn how to build a back end for a flight booking app with Node.js using Amadeus Quick-Connect, a…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Node JS app for amadeus API\",\n  \"date\": \"2020-01-07T00:00:00.000Z\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Hello developers! Today we\\u2019re going to learn how to build a back end for a flight booking app with Node.js using Amadeus Quick-Connect, a flight booking bundle featuring Flight Offers Search, Flight Offers Price and Flight Create Orders, all available in our Self-Service catalog. We will also implemented a service using airport city search. LEt\\u2019s start coding !\"), mdx(\"h2\", {\n    \"id\": \"set-up-a-simple-nodejs-server\"\n  }, \"Set up a simple Node.js server\"), mdx(\"p\", null, \"FIrst thing first we need a simple Node js server to get it running \"), mdx(\"p\", null, \"server.js\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"var express = require('express')\\n\\n app = express(),\\n port = process.env.PORT || 3000;\\n\\napp.listen(port);\\n// console.log(tree)\\nconsole.log('Amadeus RESTful API server started on: ' + port);\\n\")), mdx(\"p\", null, \"This code is an instance of an express server. Who listen on the port 3000. \"), mdx(\"h2\", {\n    \"id\": \"get-an-api-token\"\n  }, \"Get an API token\"), mdx(\"p\", null, \"THe amadeus self service API authentication is documented here. In other words you just need to get a token from the authentification endpoint and then you will pass it to the header of your futur request. Here is the code to perform it :\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"let headers= {  \\n  'Content-Type': 'application/x-www-form-urlencoded',\\n};\\n\\nlet body = {\\n \\\"grant_type\\\": \\\"client_credentials\\\",\\n \\\"client_id\\\": YOUR_CLIENT_ID,\\n \\\"client_secret\\\": YOUR_CLIENT_SECRET,\\n\\n}\\n\")), mdx(\"p\", null, \"Then we use fetch to post our credentials and get the token\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"//airport city search\\nconst uriAuth =\\\"https://test.api.amadeus.com/v1/security/oauth2/token\\\" \\n\\n//init token\\nlet token=\\\"\\\";\\n  fetch(uriAuth, { method: 'POST', \\n    headers: headers, \\n    body: 'grant_type=client_credentials&client_id=' + body.client_id + '&client_secret=' + body.client_secret\\n  })\\n\")), mdx(\"h2\", {\n    \"id\": \"creating-a-post-request-to-get-a-list-of-flight-deals\"\n  }, \"Creating a post request to get a list of flight deals\"), mdx(\"p\", null, \"Here we will use our token freshly generated to pass it to the header of our request. We build the request on the back end for some security reason and best practices.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"async function updateFlightSearch() {\\n\\n  // Default options are marked with *\\n  const response = await fetch(\\\"https://test.api.amadeus.com/v2/shopping/flight-offers\\\", {\\n    method: 'POST', // *GET, POST, PUT, DELETE, etc.\\n    mode: 'cors', // no-cors, *cors, same-origin\\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\\n    credentials: 'same-origin', // include, *same-origin, omit\\n    headers: {\\n      'Content-Type': 'application/json',authorization: 'Bearer '+token\\n      // 'Content-Type': 'application/x-www-form-urlencoded',\\n    },\\n    redirect: 'follow', // manual, *follow, error\\n    referrerPolicy: 'no-referrer', // no-referrer, *client\\n    body: JSON.stringify(request) // body data type must match \\\"Content-Type\\\" header\\n  });\\n  return await response.json(); // parses JSON response into native JavaScript objects\\n}\\n\")), mdx(\"h2\", {\n    \"id\": \"calling-flight-offers-price-to-confirm-the-final-price\"\n  }, \"Calling Flight Offers Price to confirm the final price\"), mdx(\"p\", null, \"To perfom a booking the process need to confirm the price before send it to create order endpoint. FOr that we select an item of the repsonse from flight offer search and we pass it to an other request.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"async function flifghtPrice(inputFlightOffer) {\\n  // Default options are marked with *\\n  const response = await fetch(\\\"https://test.api.amadeus.com/v2/shopping/flight-offers/pricing\\\", {\\n    method: 'POST', // *GET, POST, PUT, DELETE, etc.\\n    mode: 'cors', // no-cors, *cors, same-origin\\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\\n    credentials: 'same-origin', // include, *same-origin, omit\\n    headers: {\\n      'Content-Type': 'application/json',authorization: 'Bearer '+token\\n      // 'Content-Type': 'application/x-www-form-urlencoded',\\n    },\\n    redirect: 'follow', // manual, *follow, error\\n    referrerPolicy: 'no-referrer', // no-referrer, *client\\n    body: JSON.stringify(inputFlightOffer) // body data type must match \\\"Content-Type\\\" header\\n  });\\n  return await response.json(); // parses JSON response into native JavaScript objects\\n}\\n\")), mdx(\"p\", null, \"Then you will received your flight offer confirmation and you can pass it to the next step\"), mdx(\"h2\", {\n    \"id\": \"calling-flight-orders-create-to-complete-the-final-booking\"\n  }, \"Calling Flight Orders Create to complete the final booking\"), mdx(\"p\", null, \"Now we have selected a flight offer, confirm the price, it\\u2019s time to book our ticket. We can do it in the next process. We comnstruct a request with the flight offer selected and some data about the passenger. Name lastname mail will be enought for the demonstration.this request is pass to a function : \"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-javascript\"\n  }), \"async function CreateOrder(requestCreateOrder) {\\n  // Default options are marked with *\\n  const response = await fetch(\\\"https://test.api.amadeus.com/v1/booking/flight-orders\\\", {\\n    method: 'POST', // *GET, POST, PUT, DELETE, etc.\\n    mode: 'cors', // no-cors, *cors, same-origin\\n    cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\\n    credentials: 'same-origin', // include, *same-origin, omit\\n    headers: {\\n      'Content-Type': 'application/json',authorization: 'Bearer '+token\\n      // 'Content-Type': 'application/x-www-form-urlencoded',\\n    },\\n    redirect: 'follow', // manual, *follow, error\\n    referrerPolicy: 'no-referrer', // no-referrer, *client\\n    body: JSON.stringify(requestCreateOrder) // body data type must match \\\"Content-Type\\\" header\\n  });\\n  return await response.json(); // parses JSON response into native JavaScript objects\\n}\\n\")), mdx(\"p\", null, \"In the repsonse opbject you have a value call reference, here it is you got your flight confirmation number !\"), mdx(\"h2\", {\n    \"id\": \"conclusion-and-links-to-download-the-source-code\"\n  }, \"Conclusion and links to download the source code.\"), mdx(\"p\", null, \"Then simply it npm run start and play with your api with postman !\"), mdx(\"h2\", {\n    \"id\": \"complete-code\"\n  }, \"Complete code\"), mdx(\"p\", null, \"The complete code is available on github \", mdx(\"a\", {\n    href: \"https://github.com/amadeus4dev/Smart-flight-search-Node-Js\"\n  }, \"complete code\")));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"/nodeJs_amadeus/nodejs_amadeus/","title":"Node JS app for amadeus API","tags":[],"keywords":[],"date":"January 07, 2020"},"previous":{"__typename":"MdxBlogPost","id":"8f087f64-e6cf-50b8-a0f6-fb303b13231b","excerpt":"Today we'll learn how to implement a front end app to interact with the amadeus self service travel API.  Let's first initialize our…","slug":"/vue_js_front_end_amadeus_api/vue_js_front_end_amadeus_api/","title":"Vue JS app for amadeus API","date":"January 07, 2020"},"next":null},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"5b3438d4-0078-5641-ac32-6723f542588d","previousId":"8f087f64-e6cf-50b8-a0f6-fb303b13231b"}}}